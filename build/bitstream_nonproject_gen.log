#-----------------------------------------------------------
# Vivado v2023.2 (64-bit)
# SW Build 4029153 on Fri Oct 13 20:13:54 MDT 2023
# IP Build 4028589 on Sat Oct 14 00:45:43 MDT 2023
# SharedData Build 4025554 on Tue Oct 10 17:18:54 MDT 2023
# Start of session at: Mon Jan 26 16:52:58 2026
# Process ID: 3603105
# Current directory: /home/ecegridfs/a/437mg061/ece437/processors
# Command line: vivado -mode batch -source /home/ecegrid/a/ece437l/tools/vivado_extra/bitstream_nonproject_gen.tcl -log build/bitstream_nonproject_gen.log -journal build/bitstream_nonproject_gen.jou -tclargs memory_control 8  
# Log file: /home/ecegridfs/a/437mg061/ece437/processors/build/bitstream_nonproject_gen.log
# Journal file: /home/ecegridfs/a/437mg061/ece437/processors/build/bitstream_nonproject_gen.jou
# Running On: ee207lnx15.ecn.purdue.edu, OS: Linux, CPU Frequency: 3400.000 MHz, CPU Physical cores: 4, Host memory: 16361 MB
#-----------------------------------------------------------
source /home/ecegrid/a/ece437l/tools/vivado_extra/bitstream_nonproject_gen.tcl
# set enable_debug 0
# proc print_debug {msg} {
#     global enable_debug
#     if {$enable_debug} { puts "DEBUG: $msg" }
# }
# set output_dir ./build
# file mkdir $output_dir
# if {[llength $argv] < 2} {
#     puts "Usage: vivado -mode batch -source <script_name>.tcl -tclargs <design_top> <num_cpus> \[timing] \[clock_period]"
#     exit 1
# }
# set design_top   [lindex $argv 0]
# set num_cpus     [lindex $argv 1]
# set do_timing    0
# if {[llength $argv] > 2 && [lindex $argv 2] eq "timing"} { set do_timing 1 }
# set clock_period ""
# if {[llength $argv] > 3} { set clock_period [lindex $argv 3] }
# set main_part "xc7s50csga324-1"
# if {$num_cpus > 8} { set max_threads 8 } else { set max_threads $num_cpus }
# set base_dir [file normalize [file dirname ./]]
# set_param general.maxThreads $max_threads
# puts "INFO: Starting non-project flow for top-level: '$design_top' on part '$main_part' with $max_threads threads."
INFO: Starting non-project flow for top-level: 'memory_control' on part 'xc7s50csga324-1' with 8 threads.
# set filelist_path "build/design.f"
# if {![file exists $filelist_path]} { puts "ERROR: Filelist not found at '$filelist_path'."; exit 1 }
# set f_handle [open $filelist_path r];
# set f_content [read $f_handle];
# close $f_handle
# set main_sources [list];
# set main_xdc_files [list]
# foreach line [split $f_content "\n"] {
#     set line [string trim $line]
#     if {$line == "" || [string match "#*" $line]} { continue }
#     set full_path [file normalize [file join $base_dir $line]]
#     lappend main_sources $full_path
# }
# if {[string match "*_fpga" $design_top]} { lappend main_xdc_files "/home/ecegrid/a/ece437l/tools/vivado_extra/urbana.xdc" }
# if {$do_timing} {
#     set generated_xdc_path "$output_dir/generated_clock.xdc"; puts "INFO: Generating clock constraint file: $generated_xdc_path"
#     set f [open $generated_xdc_path "w"]
#     set target_period 10.0; if { $clock_period ne "" } { set target_period $clock_period }
#     set half_period [expr {$target_period / 2.0}]; set clk_port_name "CLK"
#     if {[string match "*_fpga" $design_top]} { set clk_port_name "CLK_100MHZ" }
#     puts $f "create_clock -period $target_period -name MAIN -waveform {0.000 $half_period} \[get_ports $clk_port_name\]"
#     if {$design_top == "system_fpga"} { puts $f "create_generated_clock -name CPUCLK -source \[get_ports CLK_100MHZ\] -divide_by 2 \[get_nets SYS/CPUCLK\]"
#     } elseif {$design_top == "system"} { puts $f "create_generated_clock -name CPUCLK -source \[get_ports CLK\] -divide_by 2 \[get_nets CPUCLK\]" }
#     close $f; lappend main_xdc_files $generated_xdc_path
# }
# set synth_dcp_file "$output_dir/${design_top}_synthesized.dcp"
# set impl_dcp_file "$output_dir/${design_top}_routed.dcp"
# set mem_file "meminit.hex"
# set run_main_synth 0
# set run_impl 0
# set sources_are_newer 0
# if {![file exists $synth_dcp_file]} {
#     puts "INFO: Main synthesis checkpoint not found. Synthesis is required."
#     set run_main_synth 1
# } else {
#     foreach src $main_sources {
#         if {[file mtime $src] > [file mtime $synth_dcp_file]} {
#             puts "INFO: Source file '[file tail $src]' is newer than the synthesis checkpoint."
#             set sources_are_newer 1
#             break
#         }
#     }
#     if {$sources_are_newer} {
#         puts "INFO: One or more source files are newer. Re-running main synthesis."
#         set run_main_synth 1
#     }
# }
INFO: Main synthesis checkpoint not found. Synthesis is required.
# if {$run_main_synth} {
#     set run_impl 1
# } elseif {![file exists $impl_dcp_file]} {
#     puts "INFO: Final implementation checkpoint not found. Implementation is required."
#     set run_impl 1
# } elseif {[file exists $mem_file] && [file mtime $mem_file] > [file mtime $impl_dcp_file]} {
#     puts "INFO: Memory initialization file is newer than the final implementation. Re-running implementation only."
#     set run_impl 1
# }
# if {!$run_main_synth && !$run_impl} {
#     puts "INFO: All outputs are up-to-date. Skipping flow. Generating reports."
# }
# if {$design_top == "system_fpga"} {
#     puts "INFO: Creating and configuring VIO IP for memory debug..."
#     create_ip -name vio -vendor xilinx.com -library ip -module_name mem_debug_vio
#     
#     set_property -dict [list \
#         CONFIG.C_NUM_PROBE_IN {1} \
#         CONFIG.C_PROBE_IN0_WIDTH {32} \
#         CONFIG.C_NUM_PROBE_OUT {1} \
#         CONFIG.C_PROBE_OUT0_WIDTH {14} \
#     ] [get_ips mem_debug_vio]
#     
#     puts "INFO: Generating IP target files..."
#     generate_target all [get_ips mem_debug_vio]
#     
#     puts "INFO: Launching out-of-context synthesis for the VIO IP..."
#     create_ip_run [get_ips mem_debug_vio]
#     launch_runs [get_runs mem_debug_vio_synth_1] -j 32
#     wait_on_run [get_runs mem_debug_vio_synth_1]
#     
#     puts "INFO: VIO IP created and synthesized successfully."
# }
# if {$run_main_synth || $run_impl} {    
#     if {!$run_main_synth && $run_impl} {
#         puts "INFO: Skipping synthesis. Opening existing synthesized checkpoint."
#         open_checkpoint $synth_dcp_file
#         puts "INFO: Reading design constraints..."
#         foreach xdc $main_xdc_files { read_xdc $xdc }
#     } else {
#         puts "INFO: Reading main design sources (including RAM)..."
#         read_verilog -sv $main_sources
#         puts "INFO: Reading design constraints..."; foreach xdc $main_xdc_files { read_xdc $xdc }
#     }
# 
#     if {$run_main_synth} {
#         puts "INFO: Starting main synthesis..."
#         synth_design -top $design_top -part $main_part -directive RuntimeOptimized \
#             -verilog_define {USE_VIVADO VIVADO_MAPPED} -include_dirs "./include"
#         write_checkpoint -force $synth_dcp_file
#     }
#     
#     if {$run_impl} {
#         puts "INFO: Starting implementation..."
#         if {![string match "*_fpga" $design_top]} {
#             set_property SEVERITY {Warning} [get_drc_checks NSTD-1]
#             set_property SEVERITY {Warning} [get_drc_checks UCIO-1]
#         }
#         opt_design
#         place_design -directive RuntimeOptimized
#         route_design -directive RuntimeOptimized
#         write_checkpoint -force $impl_dcp_file; puts "INFO: Implementation checkpoint written to '$impl_dcp_file'."
#         write_verilog -force -mode funcsim "mapped/${design_top}.sv"
# 
#         if {[string match "*_fpga" $design_top]} { 
#             puts "INFO: Writing bitstream..."; write_bitstream -force $output_dir/$design_top.bit
#             # puts "INFO: Writing memory map info..."; write_mem_info -force $output_dir/$design_top.mmi
#         }
#     }
# }
INFO: Reading main design sources (including RAM)...
read_verilog: Time (s): cpu = 00:00:06 ; elapsed = 00:00:07 . Memory (MB): peak = 1609.320 ; gain = 132.844 ; free physical = 4273 ; free virtual = 17760
INFO: Reading design constraints...
INFO: Starting main synthesis...
Command: synth_design -top memory_control -part xc7s50csga324-1 -directive RuntimeOptimized -verilog_define {USE_VIVADO VIVADO_MAPPED} -include_dirs ./include
Starting synth_design
Attempting to get a license for feature 'Synthesis' and/or device 'xc7s50'
INFO: [Common 17-349] Got license for feature 'Synthesis' and/or device 'xc7s50'
INFO: [Synth 8-7079] Multithreading enabled for synth_design using a maximum of 4 processes.
INFO: [Synth 8-7078] Launching helper process for spawning children vivado processes
INFO: [Synth 8-7075] Helper process launched with PID 3604061
---------------------------------------------------------------------------------
Starting Synthesize : Time (s): cpu = 00:00:03 ; elapsed = 00:00:04 . Memory (MB): peak = 2033.910 ; gain = 418.648 ; free physical = 3562 ; free virtual = 17060
---------------------------------------------------------------------------------
WARNING: [Synth 8-11067] parameter 'WORD_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:22]
WARNING: [Synth 8-11067] parameter 'WBYTES' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:23]
WARNING: [Synth 8-11067] parameter 'OP_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:26]
WARNING: [Synth 8-11067] parameter 'REG_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:28]
WARNING: [Synth 8-11067] parameter 'FUNC7_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:29]
WARNING: [Synth 8-11067] parameter 'FUNC3_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:30]
WARNING: [Synth 8-11067] parameter 'IMM_W_I' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:31]
WARNING: [Synth 8-11067] parameter 'IMM_W_U_J' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:32]
WARNING: [Synth 8-11067] parameter 'AOP_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:35]
WARNING: [Synth 8-11067] parameter 'ITAG_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:38]
WARNING: [Synth 8-11067] parameter 'IIDX_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:39]
WARNING: [Synth 8-11067] parameter 'IBLK_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:40]
WARNING: [Synth 8-11067] parameter 'IBYT_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:41]
WARNING: [Synth 8-11067] parameter 'DTAG_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:44]
WARNING: [Synth 8-11067] parameter 'DIDX_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:45]
WARNING: [Synth 8-11067] parameter 'DBLK_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:46]
WARNING: [Synth 8-11067] parameter 'DBYT_W' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:47]
WARNING: [Synth 8-11067] parameter 'DWAY_ASS' declared inside package 'cpu_types_pkg' shall be treated as localparam [/home/ecegridfs/a/437mg061/ece437/processors/include/cpu_types_pkg.vh:48]
INFO: [Synth 8-6157] synthesizing module 'memory_control' [/home/ecegridfs/a/437mg061/ece437/processors/source/memory_control.sv:16]
INFO: [Synth 8-6157] synthesizing module 'cache_control_if' [/home/ecegridfs/a/437mg061/ece437/processors/include/cache_control_if.vh:25]
INFO: [Synth 8-6157] synthesizing module 'caches_if' [/home/ecegridfs/a/437mg061/ece437/processors/include/caches_if.vh:18]
INFO: [Synth 8-6155] done synthesizing module 'caches_if' (0#1) [/home/ecegridfs/a/437mg061/ece437/processors/include/caches_if.vh:18]
WARNING: [Synth 8-330] inout connections inferred for interface port 'caches_if' with no modport [/home/ecegridfs/a/437mg061/ece437/processors/include/cache_control_if.vh:26]
INFO: [Synth 8-6157] synthesizing module 'caches_if' [/home/ecegridfs/a/437mg061/ece437/processors/include/caches_if.vh:18]
INFO: [Synth 8-6155] done synthesizing module 'caches_if' (0#1) [/home/ecegridfs/a/437mg061/ece437/processors/include/caches_if.vh:18]
WARNING: [Synth 8-330] inout connections inferred for interface port 'caches_if' with no modport [/home/ecegridfs/a/437mg061/ece437/processors/include/cache_control_if.vh:27]
INFO: [Synth 8-6155] done synthesizing module 'cache_control_if' (0#1) [/home/ecegridfs/a/437mg061/ece437/processors/include/cache_control_if.vh:25]
ERROR: [Synth 8-470] no interface 'cpu_ram_if' found
ERROR: [Synth 8-6156] failed synthesizing module 'memory_control' [/home/ecegridfs/a/437mg061/ece437/processors/source/memory_control.sv:16]
---------------------------------------------------------------------------------
Finished Synthesize : Time (s): cpu = 00:00:04 ; elapsed = 00:00:05 . Memory (MB): peak = 2104.879 ; gain = 489.617 ; free physical = 3486 ; free virtual = 16986
---------------------------------------------------------------------------------
synthesize failed
INFO: [Common 17-83] Releasing license: Synthesis
12 Infos, 20 Warnings, 0 Critical Warnings and 3 Errors encountered.
synth_design failed
ERROR: [Common 17-69] Command failed: Vivado Synthesis failed
INFO: [Common 17-206] Exiting Vivado at Mon Jan 26 16:53:31 2026...
